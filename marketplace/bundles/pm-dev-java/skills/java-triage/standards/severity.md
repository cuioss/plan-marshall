# Java Severity Guidelines

Decision criteria for handling Java findings based on severity, type, and context.

## Severity-to-Action Mapping

| Severity | Default Action | Override Conditions |
|----------|----------------|---------------------|
| **BLOCKER** | Fix (mandatory) | None - must be fixed |
| **CRITICAL** | Fix (mandatory) | None for vulnerabilities; document exception for others |
| **MAJOR** | Fix preferred | Suppress with justification if legacy code |
| **MINOR** | Consider | Suppress if noisy or false positive |
| **INFO** | Accept | Fix if obvious low-effort improvement |

## Decision by Finding Type

### Bugs

| Severity | Action | Justification |
|----------|--------|---------------|
| BLOCKER/CRITICAL | Fix | Potential runtime failures |
| MAJOR | Fix | Likely causes issues in edge cases |
| MINOR | Fix or suppress | Low probability of impact |

### Vulnerabilities

| Severity | Action | Notes |
|----------|--------|-------|
| BLOCKER/CRITICAL | **Fix immediately** | Security risk, no exceptions |
| MAJOR | Fix | Security best practice |
| MINOR | Fix or mitigate | Document if accepting risk |

### Code Smells

| Severity | Action | Context |
|----------|--------|---------|
| BLOCKER | Fix | Technical debt that blocks other work |
| CRITICAL | Fix | High maintenance burden |
| MAJOR | Fix or defer | Track in issue tracker if deferring |
| MINOR/INFO | Accept or fix opportunistically | Low impact |

### Cognitive Complexity

| Threshold | Action |
|-----------|--------|
| > 15 | Consider refactoring |
| > 25 | Should refactor |
| > 50 | Must refactor or document exception |

## Context Modifiers

### New Code vs Legacy Code

| Context | Guidance |
|---------|----------|
| **New code** | Hold to higher standard - fix MAJOR and above |
| **Legacy code** | More lenient - suppress with migration plan for MAJOR |
| **Actively refactored** | Fix issues encountered during refactoring |
| **Untouched legacy** | Accept with tech debt tracking |

### Test Code vs Production Code

| Context | Guidance |
|---------|----------|
| **Production code** | Standard severity rules apply |
| **Test code** | More lenient for style issues, strict for correctness |
| **Test utilities** | Can suppress warnings for intentionally permissive patterns |

### Generated Code

| Situation | Action |
|-----------|--------|
| Generated by tool | Exclude from analysis or accept findings |
| Template-generated | Fix template, regenerate |
| IDE-generated | Review and fix if needed |

## Acceptable to Accept

### Always Acceptable

| Finding Type | Reason |
|--------------|--------|
| Generated code (`**/generated/**`) | Not maintainable by hand |
| Test data builders | Intentionally permissive patterns |
| Framework requirements | Can't change (e.g., public no-arg constructor) |
| Documented false positives | Tool limitation |

### Conditionally Acceptable

| Finding Type | Condition |
|--------------|-----------|
| Legacy code issues | Tracked in issue tracker with migration plan |
| Low-severity code smells | In stable, tested code |
| Performance micro-optimizations | When actual impact is negligible |

### Never Acceptable

| Finding Type | Reason |
|--------------|--------|
| BLOCKER severity | Always indicates serious problem |
| Security vulnerabilities (any severity) | Unacceptable risk |
| Data corruption bugs | Unacceptable risk |
| Resource leaks in production code | Performance/stability impact |

## Documentation Requirements

### When Suppressing

```java
// Required: justification explaining why suppression is appropriate
@SuppressWarnings("java:S3776")  // Cognitive complexity: legacy code, tracked in JIRA-123
```

### When Accepting

- Add comment explaining acceptance rationale
- Create issue tracker entry for future fix if appropriate
- Document in tech debt register for significant items

## Iteration Limits

During finalize phase:

| Iteration | Focus |
|-----------|-------|
| 1 | Fix all BLOCKER and CRITICAL |
| 2 | Fix remaining MAJOR, suppress with justification |
| 3 | Review MINOR/INFO, accept or fix quick wins |
| MAX (5) | Accept remaining, document for future |

## Quick Decision Flowchart

```
Is it BLOCKER?
  → Yes → FIX (no exceptions)

Is it CRITICAL vulnerability?
  → Yes → FIX (no exceptions)

Is it CRITICAL bug?
  → Yes → FIX (document if truly impossible)

Is it in new code?
  → Yes → FIX (MAJOR and above)

Is it in legacy code with migration plan?
  → Yes → SUPPRESS with tracker reference

Is it low-effort fix?
  → Yes → FIX

Is it false positive?
  → Yes → SUPPRESS with explanation

Else → ACCEPT and document
```

## Related Standards

- [suppression.md](suppression.md) - How to suppress findings
- [pm-dev-java:java-core](../../java-core/SKILL.md) - Java coding standards
